# ── Production profile (MySQL 8) ─────────────────────────────────────
# All sensitive values are injected via environment variables.
# Never hard-code credentials here.

spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/pathotest?useSSL=true&requireSSL=true&serverTimezone=UTC&characterEncoding=utf8mb4}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP connection pool (production tuning)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.leak-detection-threshold=60000

spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Flyway — manages schema migrations in production
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# Security headers
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true

logging.level.com.pathotest=INFO
logging.level.org.springframework.security=WARN
